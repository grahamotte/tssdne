{"version":3,"sources":["store.js","App.js","index.js"],"names":["Planet","props","parent","color","mass","trail","x","y","xViewport","yViewport","vx","vy","ay","ax","convertViewport","v","dim","maxY","maxX","followPlanet","scale","update","planets","filter","o","forEach","other","dx","dy","d2","f","g","Math","sqrt","dt","push","this","log","decorate","observable","destroyed","action","radius","computed","Store","minX","minY","resize","window","innerWidth","innerHeight","Array","fill","random","setInterval","p","add","observer","width","store","height","map","pi","key","points","takeRight","stroke","strokeWidth","onresize","event","ReactDOM","render","StrictMode","App","document","getElementById"],"mappings":"kPAGMA,E,WAiBJ,WAAYC,GAAQ,IAAD,gCAfnBC,OAAS,KAeU,KAdnBC,MAAQ,OAcW,KAbnBC,MAAQ,EAaW,KAVnBC,MAAQ,GAUW,KATnBC,EAAI,EASe,KARnBC,EAAI,EAQe,KAPnBC,UAAY,EAOO,KANnBC,UAAY,EAMO,KALnBC,GAAK,EAKc,KAJnBC,GAAK,EAIc,KAHnBC,GAAK,EAGc,KAFnBC,GAAK,EAEc,KAcnBC,gBAAkB,SAACC,EAAGR,GACpB,IAAMS,EAAMT,EAAI,EAAKL,OAAOe,KAAO,EAAKf,OAAOgB,KAG/C,OAAQX,GAAK,EAAI,IAAMQ,EAFR,EAAKb,OAAOiB,aAAaZ,EAAI,IAAM,MAEb,EAAKL,OAAOkB,MAAQJ,EAAM,GAlB9C,KAqBnBK,OAAS,WACP,IAAIR,EAAK,EACLD,EAAK,EAET,EAAKV,OAAOoB,QACTC,QAAO,SAACC,GAAD,OAAOA,IAAM,KACpBC,SAAQ,SAACC,GACR,IAAMC,EAAKD,EAAMpB,EAAI,EAAKA,EACpBsB,EAAKF,EAAMnB,EAAI,EAAKA,EACpBsB,EAAKF,EAAKA,EAAKC,EAAKA,EACpBE,EAAK,EAAK5B,OAAO6B,EAAIL,EAAMtB,KAAQyB,EAAKG,KAAKC,KAAKJ,GACxDhB,GAAMiB,EAAIH,EACVf,GAAMkB,EAAIF,KAGd,EAAKf,GAAKA,EACV,EAAKD,GAAKA,EACV,EAAKF,IAAM,EAAKG,GAAK,EAAKX,OAAOgC,GACjC,EAAKvB,IAAM,EAAKC,GAAK,EAAKV,OAAOgC,GACjC,EAAK5B,GAAK,EAAKI,GAAK,EAAKR,OAAOgC,GAChC,EAAK3B,GAAK,EAAKI,GAAK,EAAKT,OAAOgC,GAChC,EAAK1B,UAAY,EAAKM,gBAAgB,EAAKR,GAAG,GAC9C,EAAKG,UAAY,EAAKK,gBAAgB,EAAKP,GAAG,GAC9C,EAAKF,MAAM8B,KAAK,EAAK3B,WACrB,EAAKH,MAAM8B,KAAK,EAAK1B,YA5CrB2B,KAAKlC,OAASD,EAAMC,OACpBkC,KAAKjC,MAAQF,EAAME,OAASiC,KAAKjC,MACjCiC,KAAKhC,KAAOH,EAAMG,MAAQgC,KAAKhC,KAC/BgC,KAAK9B,EAAIL,EAAMK,GAAK8B,KAAK9B,EACzB8B,KAAK7B,EAAIN,EAAMM,GAAK6B,KAAK7B,EACzB6B,KAAK1B,GAAKT,EAAMS,IAAM0B,KAAK1B,GAC3B0B,KAAKzB,GAAKV,EAAMU,IAAMyB,KAAKzB,G,mDAI3B,OAAOqB,KAAKK,IAAgB,IAAZD,KAAKhC,U,KAsCzBkC,mBAAStC,EAAQ,CACfE,OAAQqC,aACRpC,MAAOoC,aACPlC,MAAOkC,aACPC,UAAWD,aACXnC,KAAMmC,aACNlB,OAAQoB,SACRC,OAAQC,WACRrC,EAAGiC,aACHhC,EAAGgC,aACH/B,UAAW+B,aACX9B,UAAW8B,aACX7B,GAAI6B,aACJ5B,GAAI4B,aACJ1B,GAAI0B,aACJ3B,GAAI2B,e,IAGAK,EAYJ,aAAe,IAAD,gCAXdb,EAAI,GAWU,KAVdG,GAAK,KAUS,KATdd,MAAQ,IASM,KARdyB,KAAO,EAQO,KAPd3B,KAAO,EAOO,KANd4B,KAAO,EAMO,KALd7B,KAAO,EAKO,KAHdK,QAAU,GAGI,KAFdH,aAAe,IAAInB,EAAO,CAAEE,OAAQkC,OAEtB,KAiCdW,OAAS,WACP,EAAKF,KAAO,EACZ,EAAK3B,KAAO8B,OAAOC,WACnB,EAAKH,KAAO,EACZ,EAAK7B,KAAO+B,OAAOE,aApCnBd,KAAKW,SAELX,KAAKd,QAAQa,KACX,IAAInC,EAAO,CACTE,OAAQkC,KACRhC,KAAM,MAIV,IAAI+C,MAAM,GAAGC,KAAK,GAAG3B,SAAQ,WAC3B,IAAMnB,EAAI+C,iBAAO,EAAG,GAAG,GAGvB,EAAK/B,QAAQa,KACX,IAAInC,EAAO,CACTE,OAAQ,EACRE,KAAMiD,iBAAO,EAAG,MAAS,GACzB/C,EAAGA,EACHC,EAPM,EAQNG,GAAI,EACJC,GAAI0C,kBAAQ,GAAI,GAAG,SAKzBjB,KAAKjB,aAAeiB,KAAKd,QAAQ,GAEjCgC,aAAY,WACV,EAAKhC,QAAQG,SAAQ,SAAC8B,GAAD,OAAOA,EAAElC,cAC7B,KAWPiB,mBAASM,EAAO,CACdb,EAAGQ,aACHL,GAAIK,aACJnB,MAAOmB,aACPjB,QAASiB,aACTpB,aAAcoB,aACdQ,OAAQN,SACRe,IAAKf,WAGQ,UAAIG,EC7IJa,eAAS,WACtB,OACE,kBAAC,QAAD,CAAOC,MAAOC,EAAMzC,KAAM0C,OAAQD,EAAM1C,MACtC,kBAAC,QAAD,CAAOmC,KAAK,QACV,kBAAC,OAAD,CAAMM,MAAOC,EAAMzC,KAAM0C,OAAQD,EAAM1C,KAAMmC,KAAK,UAEjDO,EAAMrC,QAAQuC,KAAI,SAACN,EAAGO,GACrB,OACE,kBAAC,OAAD,CACEC,IAAKD,EACLE,OAAQC,oBAAUV,EAAElD,MAAO,KAC3B6D,OAAO,OACPC,YAAa,OAKlBR,EAAMrC,QAAQuC,KAAI,SAACN,EAAGO,GACrB,OACE,kBAAC,SAAD,CACEC,IAAKD,EACLxD,EAAGiD,EAAE/C,UACLD,EAAGgD,EAAE9C,UACLiC,OAAQa,EAAEb,OACVU,KAAMG,EAAEpD,gB,iBC1BtB6C,OAAOoB,SAAW,SAACC,GAAD,OAAWV,EAAMZ,UAEnCuB,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAACC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.5014e284.chunk.js","sourcesContent":["import { action, computed, decorate, observable } from \"mobx\";\nimport { random, sample } from \"lodash\";\n\nclass Planet {\n  // const\n  parent = null;\n  color = \"#fff\";\n  mass = -1.0;\n\n  // movement\n  trail = [];\n  x = 0.0;\n  y = 0.0;\n  xViewport = 0.0;\n  yViewport = 0.0;\n  vx = 0.0;\n  vy = 0.0;\n  ay = 0.0;\n  ax = 0.0;\n\n  constructor(props) {\n    this.parent = props.parent;\n    this.color = props.color || this.color;\n    this.mass = props.mass || this.mass;\n    this.x = props.x || this.x;\n    this.y = props.y || this.y;\n    this.vx = props.vx || this.vx;\n    this.vy = props.vy || this.vy;\n  }\n\n  get radius() {\n    return Math.log(this.mass * 1.0e8);\n  }\n\n  convertViewport = (v, y) => {\n    const dim = y ? this.parent.maxY : this.parent.maxX;\n    const follow = this.parent.followPlanet[y ? \"y\" : \"x\"];\n\n    return (y ? -1 : 1) * (v - follow) * this.parent.scale + dim / 2;\n  };\n\n  update = () => {\n    var ax = 0;\n    var ay = 0;\n\n    this.parent.planets\n      .filter((o) => o !== this)\n      .forEach((other) => {\n        const dx = other.x - this.x;\n        const dy = other.y - this.y;\n        const d2 = dx * dx + dy * dy;\n        const f = (this.parent.g * other.mass) / d2 / Math.sqrt(d2);\n        ax += f * dx;\n        ay += f * dy;\n      });\n\n    this.ax = ax;\n    this.ay = ay;\n    this.vx += this.ax * this.parent.dt;\n    this.vy += this.ay * this.parent.dt;\n    this.x += this.vx * this.parent.dt;\n    this.y += this.vy * this.parent.dt;\n    this.xViewport = this.convertViewport(this.x, false);\n    this.yViewport = this.convertViewport(this.y, true);\n    this.trail.push(this.xViewport);\n    this.trail.push(this.yViewport);\n  };\n}\n\ndecorate(Planet, {\n  parent: observable,\n  color: observable,\n  trail: observable,\n  destroyed: observable,\n  mass: observable,\n  update: action,\n  radius: computed,\n  x: observable,\n  y: observable,\n  xViewport: observable,\n  yViewport: observable,\n  vx: observable,\n  vy: observable,\n  ax: observable,\n  ay: observable,\n});\n\nclass Store {\n  g = 40; // const\n  dt = 0.005; // days\n  scale = 120;\n  minX = 0;\n  maxX = 0;\n  minY = 0;\n  maxY = 0;\n\n  planets = [];\n  followPlanet = new Planet({ parent: this });\n\n  constructor() {\n    this.resize();\n\n    this.planets.push(\n      new Planet({\n        parent: this,\n        mass: 0.8,\n      })\n    );\n\n    new Array(8).fill(0).forEach(() => {\n      const x = random(1, 3, true);\n      const y = 0;\n\n      this.planets.push(\n        new Planet({\n          parent: this,\n          mass: random(0, 0.00001, true),\n          x: x,\n          y: y,\n          vx: 0,\n          vy: random(-3, -5, true),\n        })\n      );\n    });\n\n    this.followPlanet = this.planets[0];\n\n    setInterval(() => {\n      this.planets.forEach((p) => p.update());\n    }, 30);\n  }\n\n  resize = () => {\n    this.minX = 0;\n    this.maxX = window.innerWidth;\n    this.minY = 0;\n    this.maxY = window.innerHeight;\n  };\n}\n\ndecorate(Store, {\n  g: observable,\n  dt: observable,\n  scale: observable,\n  planets: observable,\n  followPlanet: observable,\n  resize: action,\n  add: action,\n});\n\nexport default new Store();\n","import \"mobx-react/batchingOptOut\";\n\nimport { Circle, Layer, Line, Rect, Stage } from \"react-konva\";\n\nimport React from \"react\";\nimport { observer } from \"mobx-react\";\nimport store from \"./store\";\nimport { takeRight } from \"lodash\";\n\nexport default observer(() => {\n  return (\n    <Stage width={store.maxX} height={store.maxY}>\n      <Layer fill=\"#000\">\n        <Rect width={store.maxX} height={store.maxY} fill=\"black\" />\n\n        {store.planets.map((p, pi) => {\n          return (\n            <Line\n              key={pi}\n              points={takeRight(p.trail, 250)}\n              stroke=\"#ddd\"\n              strokeWidth={1}\n            />\n          );\n        })}\n\n        {store.planets.map((p, pi) => {\n          return (\n            <Circle\n              key={pi}\n              x={p.xViewport}\n              y={p.yViewport}\n              radius={p.radius}\n              fill={p.color}\n            />\n          );\n        })}\n      </Layer>\n    </Stage>\n  );\n});\n","import \"./index.css\";\n\nimport App from \"./App\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport store from \"./store\";\n\nwindow.onresize = (event) => store.resize();\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}